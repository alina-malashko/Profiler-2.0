import React, { useState } from 'react';
import { useField } from 'formik';
import stylesInputPassword from './InputPassword.module.scss';
import styles from '../Input.module.scss';

const InputPassword = (props) => {
  const [showPassword, setShowPassword] = useState(false);
  const [active, setActive] = useState(false);
  const [field, meta] = useField(props);

  function handleBlur(e) {
    field.onBlur(e);
    setActive(false);
  }

  function handleFocus(e) {
    setActive(true);
  }

  return (
    <>
      <div className={styles.inputContainer}>
        <input
          {...props}
          {...field}
          className={`${styles.input} ${meta.error && meta.touched ? styles.input__error : ''}`}
          onFocus={handleFocus}
          onBlur={handleBlur}
          type={showPassword ? 'text' : 'password'}
          placeholder={!active ? 'Password' : 'Enter your password'}
        />
        <div
          className={stylesInputPassword.password}
          onClick={() => {
            setShowPassword(!showPassword);
          }}
        >
          {showPassword ? (
            <svg
              width='30'
              height='30'
              viewBox='0 0 30 30'
              fill='none'
              xmlns='http://www.w3.org/2000/svg'
            >
              <path
                d='M15 12.5C15.7956 12.5 16.5587 12.8161 17.1213 13.3787C17.6839 13.9413 18 14.7044 18 15.5C18 16.2956 17.6839 17.0587 17.1213 17.6213C16.5587 18.1839 15.7956 18.5 15 18.5C14.2044 18.5 13.4413 18.1839 12.8787 17.6213C12.3161 17.0587 12 16.2956 12 15.5C12 14.7044 12.3161 13.9413 12.8787 13.3787C13.4413 12.8161 14.2044 12.5 15 12.5ZM15 8C20 8 24.27 11.11 26 15.5C24.27 19.89 20 23 15 23C10 23 5.73 19.89 4 15.5C5.73 11.11 10 8 15 8ZM6.18 15.5C6.98825 17.1503 8.24331 18.5407 9.80248 19.5133C11.3617 20.4858 13.1624 21.0013 15 21.0013C16.8376 21.0013 18.6383 20.4858 20.1975 19.5133C21.7567 18.5407 23.0117 17.1503 23.82 15.5C23.0117 13.8497 21.7567 12.4593 20.1975 11.4867C18.6383 10.5142 16.8376 9.99868 15 9.99868C13.1624 9.99868 11.3617 10.5142 9.80248 11.4867C8.24331 12.4593 6.98825 13.8497 6.18 15.5Z'
                fill='#407BFF'
              />
            </svg>
          ) : (
            <svg
              width='30'
              height='30'
              viewBox='0 0 30 30'
              fill='none'
              xmlns='http://www.w3.org/2000/svg'
            >
              <path
                d='M5 8.77L6.28 7.5L23 24.22L21.73 25.5L18.65 22.42C17.5 22.8 16.28 23 15 23C10 23 5.73 19.89 4 15.5C4.69 13.74 5.79 12.19 7.19 10.96L5 8.77ZM15 12.5C15.7956 12.5 16.5587 12.8161 17.1213 13.3787C17.6839 13.9413 18 14.7044 18 15.5C18.0005 15.8406 17.943 16.1787 17.83 16.5L14 12.67C14.3213 12.557 14.6594 12.4995 15 12.5ZM15 8C20 8 24.27 11.11 26 15.5C25.1839 17.5732 23.7969 19.3727 22 20.69L20.58 19.26C21.9629 18.3034 23.0782 17.0091 23.82 15.5C23.0116 13.8499 21.7564 12.4598 20.1973 11.4875C18.6381 10.5152 16.8375 9.99988 15 10C13.91 10 12.84 10.18 11.84 10.5L10.3 8.97C11.74 8.35 13.33 8 15 8ZM6.18 15.5C6.98844 17.1501 8.24357 18.5402 9.80273 19.5125C11.3619 20.4848 13.1625 21.0001 15 21C15.69 21 16.37 20.93 17 20.79L14.72 18.5C14.0242 18.4254 13.3748 18.1149 12.88 17.62C12.3851 17.1252 12.0746 16.4758 12 15.78L8.6 12.37C7.61 13.22 6.78 14.28 6.18 15.5Z'
                fill='#407BFF'
              />
            </svg>
          )}
        </div>
      </div>
      {meta.touched && meta.error && (
        <div className={styles.error}>
          {meta.error}
          <svg
            width='24'
            height='24'
            viewBox='0 0 24 24'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
          >
            <path
              d='M12 13.2C12.34 13.2 12.6252 13.0848 12.8556 12.8544C13.0852 12.6248 13.2 12.34 13.2 12V7.17C13.2 6.83 13.0852 6.55 12.8556 6.33C12.6252 6.11 12.34 6 12 6C11.66 6 11.3752 6.1148 11.1456 6.3444C10.9152 6.5748 10.8 6.86 10.8 7.2V12.03C10.8 12.37 10.9152 12.65 11.1456 12.87C11.3752 13.09 11.66 13.2 12 13.2ZM12 18C12.34 18 12.6252 17.8848 12.8556 17.6544C13.0852 17.4248 13.2 17.14 13.2 16.8C13.2 16.46 13.0852 16.1748 12.8556 15.9444C12.6252 15.7148 12.34 15.6 12 15.6C11.66 15.6 11.3752 15.7148 11.1456 15.9444C10.9152 16.1748 10.8 16.46 10.8 16.8C10.8 17.14 10.9152 17.4248 11.1456 17.6544C11.3752 17.8848 11.66 18 12 18ZM12 24C10.34 24 8.78 23.6848 7.32 23.0544C5.86 22.4248 4.59 21.57 3.51 20.49C2.43 19.41 1.5752 18.14 0.9456 16.68C0.3152 15.22 0 13.66 0 12C0 10.34 0.3152 8.78 0.9456 7.32C1.5752 5.86 2.43 4.59 3.51 3.51C4.59 2.43 5.86 1.5748 7.32 0.9444C8.78 0.3148 10.34 0 12 0C13.66 0 15.22 0.3148 16.68 0.9444C18.14 1.5748 19.41 2.43 20.49 3.51C21.57 4.59 22.4248 5.86 23.0544 7.32C23.6848 8.78 24 10.34 24 12C24 13.66 23.6848 15.22 23.0544 16.68C22.4248 18.14 21.57 19.41 20.49 20.49C19.41 21.57 18.14 22.4248 16.68 23.0544C15.22 23.6848 13.66 24 12 24ZM12 21.6C14.66 21.6 16.9252 20.6652 18.7956 18.7956C20.6652 16.9252 21.6 14.66 21.6 12C21.6 9.34 20.6652 7.0748 18.7956 5.2044C16.9252 3.3348 14.66 2.4 12 2.4C9.34 2.4 7.0752 3.3348 5.2056 5.2044C3.3352 7.0748 2.4 9.34 2.4 12C2.4 14.66 3.3352 16.9252 5.2056 18.7956C7.0752 20.6652 9.34 21.6 12 21.6Z'
              fill='#D40000'
            />
          </svg>
        </div>
      )}
    </>
  );
};

export default InputPassword;
